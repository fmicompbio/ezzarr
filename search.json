[{"path":"https://fmicompbio.github.io/ezzarr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 Friedrich Miescher Institute Biomedical Research Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"load-the-ezzarr-package","dir":"Articles","previous_headings":"","what":"Load the ezzarr package","title":"Using ez-zarr in R","text":"","code":"library(ezzarr) library(EBImage)"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"check-the-version-of-ez-zarr","dir":"Articles","previous_headings":"","what":"Check the version of ez-zarr","title":"Using ez-zarr in R","text":"getEzZarrVersion() function returns version ez-zarr installed used current version ezzarr. Calling function also build conda environment already exist.","code":"getEzZarrVersion() #> [1] \"0.3.3\""},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"get-the-path-to-the-environment","dir":"Articles","previous_headings":"","what":"Get the path to the environment","title":"Using ez-zarr in R","text":"ezzarr provides convenience function get path ez-zarr conda environment. can useful e.g. order activate environment outside R.","code":"getEzZarrEnvPath() #> [1] \"/Users/runner/Library/Caches/org.R-project.R/R/basilisk/1.17.2/ezzarr/0.1.1/ezzarr\""},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"download-example-data-to-temporary-directory","dir":"Articles","previous_headings":"","what":"Download example data to temporary directory","title":"Using ez-zarr in R","text":"remainder vignette, illustrate use ezzarr means example data set, representing maximum intensity projection one well high-content screening plate, processed using Fractal. data set used ez-zarr python documentation. data available Zenodo; , download unpack temporary directory. going , save path unpacked data set zarrpath variable, explore content directory.","code":"td <- tempdir() url <- \"https://zenodo.org/records/10519143/files/20200812-CardiomyocyteDifferentiation14-Cycle1_mip.zarr.zip\" download.file(url, destfile = file.path(td, basename(url))) unzip(file.path(td, basename(url)),        exdir = td) zarrpath <- file.path(td, sub(\"\\\\.zip$\", \"\", basename(url))) fs::dir_tree(zarrpath, recurse = 3) #> /var/folders/t_/mmhnh941511_hp2lwh383bp00000gn/T//Rtmp9oet5O/20200812-CardiomyocyteDifferentiation14-Cycle1_mip.zarr #> └── B #>     └── 03 #>         └── 0 #>             ├── 0 #>             ├── 1 #>             ├── 2 #>             ├── 3 #>             ├── 4 #>             ├── labels #>             └── tables"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"activate-the-environment","dir":"Articles","previous_headings":"","what":"Activate the environment","title":"Using ez-zarr in R","text":"Next, activate conda environment contains ez-zarr necessary dependencies, via enableEzZarr() function. addition activating conda environment, function returns list imported python modules, can used access python functions.","code":"## Activate environment env <- enableEzZarr()  ## List imported modules names(env) #> [1] \"plt\"     \"np\"      \"ez_zarr\"  ## Switch matplotlib backend (for non-interactive use) env$plt$switch_backend(\"agg\")"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"load-an-example-image","dir":"Articles","previous_headings":"","what":"Load an example image","title":"Using ez-zarr in R","text":"Now environment activated, can import image OME-Zarr fileset. creating object Image class, defined ez-zarr.","code":"img <- env$ez_zarr$ome_zarr$Image(path = file.path(zarrpath, \"B/03/0\"))  img #> Image 0 #>   path: /var/folders/t_/mmhnh941511_hp2lwh383bp00000gn/T//Rtmp9oet5O/20200812-CardiomyocyteDifferentiation14-Cycle1_mip.zarr/B/03/0 #>   n_channels: 1 (DAPI) #>   n_pyramid_levels: 5 #>   pyramid_zyx_scalefactor: [1. 2. 2.] #>   full_resolution_zyx_spacing (micrometer): [1.0, 0.1625, 0.1625] #>   segmentations: empty, nuclei #>   tables (measurements): FOV_ROI_table, expected_table_FOV_ROI_table_1_False_0_0, expected_table_FOV_ROI_table_1_True_0_0, expected_table_masked_nuclei_ROI_table_0_True_0_0, expected_table_masked_nuclei_ROI_table_1_True_0_0, expected_table_well_ROI_table_0_True_0_0, expected_table_well_ROI_table_3_False_0_0, expected_table_well_ROI_table_3_True_0_0, nuclei, nuclei_ROI_table, well_ROI_table  img$tree(level = 1) #> / #>  ├── 0 (1, 1, 2160, 5120) uint16 #>  ├── 1 (1, 1, 1080, 2560) uint16 #>  ├── 2 (1, 1, 540, 1280) uint16 #>  ├── 3 (1, 1, 270, 640) uint16 #>  ├── 4 (1, 1, 135, 320) uint16 #>  ├── labels #>  └── tables"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"get-details-about-the-image","dir":"Articles","previous_headings":"","what":"Get details about the image","title":"Using ez-zarr in R","text":"ez-zarr contains many methods accessing various aspects Image object. , illustrate .","code":"## Channel information length(img$nchannels_image) #> [1] 1 img$channels[[1]] #> $color #> [1] \"00FFFF\" #>  #> $label #> [1] \"DAPI\" #>  #> $wavelength_id #> [1] \"A01_C01\" #>  #> $window #> $window$end #> [1] 800 #>  #> $window$max #> [1] 65535 #>  #> $window$min #> [1] 0 #>  #> $window$start #> [1] 110  ## Label names img$label_names #> [1] \"empty\"  \"nuclei\"  ## Scales for a given pyramid level unlist(img$get_scale(pyramid_level = \"2\")) #> [1] 1.00 1.00 0.65 0.65  ## Path img$get_path() #> [1] \"/var/folders/t_/mmhnh941511_hp2lwh383bp00000gn/T//Rtmp9oet5O/20200812-CardiomyocyteDifferentiation14-Cycle1_mip.zarr/B/03/0\"  ## Image name img$name #> [1] \"0\"  ## Table names img$table_names #>  [1] \"FOV_ROI_table\"                                     #>  [2] \"expected_table_FOV_ROI_table_1_False_0_0\"          #>  [3] \"expected_table_FOV_ROI_table_1_True_0_0\"           #>  [4] \"expected_table_masked_nuclei_ROI_table_0_True_0_0\" #>  [5] \"expected_table_masked_nuclei_ROI_table_1_True_0_0\" #>  [6] \"expected_table_well_ROI_table_0_True_0_0\"          #>  [7] \"expected_table_well_ROI_table_3_False_0_0\"         #>  [8] \"expected_table_well_ROI_table_3_True_0_0\"          #>  [9] \"nuclei\"                                            #> [10] \"nuclei_ROI_table\"                                  #> [11] \"well_ROI_table\""},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"plot-image","dir":"Articles","previous_headings":"","what":"Plot image","title":"Using ez-zarr in R","text":"Plots ez-zarr implemented using matplotlib.pyplot display correctly using plot methods interactively python (e.g. img.plot()) R via reticulate (e.g. img$plot()). special case use plot methods non-interactive Rmarkdown Quarto documents. , plots shown python code chunks, used examples (note r.img syntax refer img object R process).","code":""},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"with-default-settings","dir":"Articles","previous_headings":"Plot image","what":"With default settings","title":"Using ez-zarr in R","text":"corresponding R code (interactive use) look like:","code":"r.img.plot() img$plot()"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"adding-a-scale-bar-limiting-the-channel-range","dir":"Articles","previous_headings":"Plot image","what":"Adding a scale bar, limiting the channel range","title":"Using ez-zarr in R","text":"corresponding R code interactive shown . Please note need use specific R data structures satisfy expected arguments types python function. example, python list ([...]) created using R list (list(...)) vector. list conversions reticulate uses R python data structures see reticulate type conversions.","code":"r.img.plot(channels = [0],            channel_colors = [\"white\"],            channel_ranges = [[100, 600]],            scalebar_micrometer = 150,            scalebar_color = \"yellow\",            scalebar_position = \"topleft\",            scalebar_label = True,            fig_width_inch = 5,            fig_height_inch = 4,            fig_dpi = 100,            axis_style = \"micrometer\") img$plot(channels = list(0L),          channel_colors = list(\"white\"),          channel_ranges = list(c(100, 600)),          scalebar_micrometer = 150L,          scalebar_color = \"yellow\",          scalebar_position = \"topleft\",          scalebar_label = TRUE,          fig_width_inch = 5,          fig_height_inch = 4,          fig_dpi = 100,          axis_style = \"micrometer\")"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"zoom-in","dir":"Articles","previous_headings":"Plot image","what":"Zoom in","title":"Using ez-zarr in R","text":"","code":"r.img.plot(pyramid_level = \"0\",            upper_left_yx = [130, 140],            lower_right_yx = [300, 310],            scalebar_micrometer = 30,            scalebar_color = \"magenta\",            fig_width_inch = 5,            fig_height_inch = 5,            fig_dpi = 100)"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"overlay-nuclei-segmentation","dir":"Articles","previous_headings":"Plot image","what":"Overlay nuclei segmentation","title":"Using ez-zarr in R","text":"","code":"r.img.plot(label_name = \"nuclei\",             pyramid_level = \"0\",            upper_left_yx = [130, 140],            lower_right_yx = [300, 310],            scalebar_micrometer = 30,            scalebar_color = \"magenta\",            fig_width_inch = 5,            fig_height_inch = 5,            fig_dpi = 100) #> /Users/runner/Library/Caches/org.R-project.R/R/basilisk/1.17.2/ezzarr/0.1.1/ezzarr/lib/python3.10/site-packages/ez_zarr/ome_zarr.py:845: UserWarning: For the requested pyramid level (0) of the intensity image, no matching label ('nuclei') is available. Up-scaling the label using factor(s) [1. 4. 4.] #>   warnings.warn(f\"For the requested pyramid level ({pyramid_level}) of the intensity image, no matching label ('{lname}') is available. Up-scaling the label using factor(s) {scalefact_yx}\")"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"import-and-plot-entire-plate","dir":"Articles","previous_headings":"","what":"Import and plot entire plate","title":"Using ez-zarr in R","text":", imported visualized single image. ez-zarr also contains classes represent high-content screening plates , arbitrary, collections images. , use import_plate() function read whole plate (note one well imaged). , use python code chunk plot included compiled notebook (needed interactive use):","code":"plt <- env$ez_zarr$ome_zarr$import_plate(zarrpath) r.plt.plot()"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"extract-subarray","dir":"Articles","previous_headings":"","what":"Extract subarray","title":"Using ez-zarr in R","text":"addition plotting, ez-zarr also contains functionality extract subarrays given image, based coordinates (given either pixel space given pyramid level, micrometers). illustrate extracting subarray defined bounding box x/y plane (area zoomed ), displaying resulting array EBImage R package.  also possible extract pair arrays (intensity image one provided labels).","code":"out <- img$get_array_by_coordinate(upper_left_yx = c(130, 140),                                     lower_right_yx = c(300, 310),                                     pyramid_level = \"0\",                                     as_NumPy = TRUE,                                     coordinate_unit = \"micrometer\")  ## Output is an R array class(out) #> [1] \"array\" dim(out) #> [1]    1    1 1046 1046  ## Display 2d image im <- EBImage::Image(out[1, 1, , ] / 500) EBImage::display(im, method = \"raster\", interpolate = FALSE) pair <- img$get_array_pair_by_coordinate(label_name = \"nuclei\",                                           upper_left_yx = c(130, 140),                                          lower_right_yx = c(300, 310),                                          pyramid_level = \"0\",                                          coordinate_unit = \"micrometer\")  length(pair) #> [1] 2  ## Intensity image dim(pair[[1]]) #> [1]    1    1 1044 1048  ## Label(s) length(pair[[2]]) #> [1] 1 dim(pair[[2]][[1]]) #> [1]    1 1044 1048"},{"path":"https://fmicompbio.github.io/ezzarr/articles/ezzarr.html","id":"session-info","dir":"Articles","previous_headings":"","what":"Session info","title":"Using ez-zarr in R","text":"","code":"sessionInfo() #> R version 4.4.1 (2024-06-14) #> Platform: aarch64-apple-darwin20 #> Running under: macOS Sonoma 14.7 #>  #> Matrix products: default #> BLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib  #> LAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0 #>  #> locale: #> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 #>  #> time zone: UTC #> tzcode source: internal #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #> [1] EBImage_4.47.0 ezzarr_0.1.1   #>  #> loaded via a namespace (and not attached): #>  [1] Matrix_1.7-0          jsonlite_1.8.9        highr_0.11            #>  [4] crayon_1.5.3          compiler_4.4.1        filelock_1.0.3        #>  [7] Rcpp_1.0.13           bitops_1.0-9          parallel_4.4.1        #> [10] jquerylib_0.1.4       systemfonts_1.1.0     textshaping_0.4.0     #> [13] png_0.1-8             yaml_2.3.10           fastmap_1.2.0         #> [16] reticulate_1.39.0     lattice_0.22-6        R6_2.5.1              #> [19] knitr_1.48            BiocGenerics_0.51.3   htmlwidgets_1.6.4     #> [22] tibble_3.2.1          desc_1.4.3            fftwtools_0.9-11      #> [25] pillar_1.9.0          bslib_0.8.0           tiff_0.1-12           #> [28] rlang_1.1.4           utf8_1.2.4            cachem_1.1.0          #> [31] dir.expiry_1.13.0     xfun_0.48             fs_1.6.4              #> [34] sass_0.4.9            cli_3.6.3             magrittr_2.0.3        #> [37] withr_3.0.1           pkgdown_2.1.1.9000    digest_0.6.37         #> [40] grid_4.4.1            locfit_1.5-9.10       basilisk_1.17.2       #> [43] lifecycle_1.0.4       vctrs_0.6.5           glue_1.8.0            #> [46] evaluate_1.0.0        ragg_1.3.3            abind_1.4-8           #> [49] RCurl_1.98-1.16       fansi_1.0.6           rmarkdown_2.28        #> [52] pkgconfig_2.0.3       basilisk.utils_1.17.3 tools_4.4.1           #> [55] jpeg_0.1-10           htmltools_0.5.8.1"},{"path":"https://fmicompbio.github.io/ezzarr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Charlotte Soneson. Author, maintainer. Michael Stadler. Author. Silvia Barbiero. Author. Friedrich Miescher Institute Biomedical Research. Copyright holder.","code":""},{"path":"https://fmicompbio.github.io/ezzarr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Soneson C, Stadler M, Barbiero S (2024). ezzarr: Set conda environment ez-zarr. R package version 0.1.1, https://github.com/fmicompbio/ezzarr.","code":"@Manual{,   title = {ezzarr: Set up conda environment for ez-zarr},   author = {Charlotte Soneson and Michael Stadler and Silvia Barbiero},   year = {2024},   note = {R package version 0.1.1},   url = {https://github.com/fmicompbio/ezzarr}, }"},{"path":"https://fmicompbio.github.io/ezzarr/index.html","id":"ezzarr","dir":"","previous_headings":"","what":"Set up conda environment for ez-zarr","title":"Set up conda environment for ez-zarr","text":"ezzarr package provides thin wrapper around ez-zarr python package.","code":""},{"path":"https://fmicompbio.github.io/ezzarr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Set up conda environment for ez-zarr","text":"can install development version ezzarr GitHub :","code":"# install.packages(\"pak\") pak::pak(\"fmicompbio/ezzarr\")"},{"path":"https://fmicompbio.github.io/ezzarr/reference/enableEzZarr.html","id":null,"dir":"Reference","previous_headings":"","what":"Enable ez-zarr — enableEzZarr","title":"Enable ez-zarr — enableEzZarr","text":"Activate built-conda environment provides python, ez-zarr dependencies using useBasiliskEnv, import required modules reticulate.","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/enableEzZarr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enable ez-zarr — enableEzZarr","text":"","code":"enableEzZarr()"},{"path":"https://fmicompbio.github.io/ezzarr/reference/enableEzZarr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Enable ez-zarr — enableEzZarr","text":"list imported modules: plt matplotlib.pyplot np numpy ez_zarr  ome_zarr ez_zarr.ome_zarr plotting ez_zarr.plotting utils ez_zarr.utils","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/enableEzZarr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Enable ez-zarr — enableEzZarr","text":"usage examples see vignette(package=\"ezzarr\").","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/enableEzZarr.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Enable ez-zarr — enableEzZarr","text":"Charlotte Soneson","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/enableEzZarr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Enable ez-zarr — enableEzZarr","text":"","code":"env <- enableEzZarr() names(env) #> [1] \"plt\"     \"np\"      \"ez_zarr\" env$np$`__version__` #> [1] \"2.1.2\" env$ez_zarr$ome_zarr$`__version__` #> [1] \"0.3.3\""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrEnvPath.html","id":null,"dir":"Reference","previous_headings":"","what":"Get path to ez-zarr conda environment — getEzZarrEnvPath","title":"Get path to ez-zarr conda environment — getEzZarrEnvPath","text":"Get path ez-zarr conda environment","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrEnvPath.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get path to ez-zarr conda environment — getEzZarrEnvPath","text":"","code":"getEzZarrEnvPath()"},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrEnvPath.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get path to ez-zarr conda environment — getEzZarrEnvPath","text":"character scalar indicating path conda environment provided package.","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrEnvPath.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get path to ez-zarr conda environment — getEzZarrEnvPath","text":"Charlotte Soneson","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrEnvPath.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get path to ez-zarr conda environment — getEzZarrEnvPath","text":"","code":"getEzZarrEnvPath() #> [1] \"/Users/runner/Library/Caches/org.R-project.R/R/basilisk/1.17.2/ezzarr/0.1.1/ezzarr\""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrVersion.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the version of ez-zarr python package — getEzZarrVersion","title":"Get the version of ez-zarr python package — getEzZarrVersion","text":"Get version ez-zarr python package","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrVersion.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the version of ez-zarr python package — getEzZarrVersion","text":"","code":"getEzZarrVersion()"},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrVersion.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the version of ez-zarr python package — getEzZarrVersion","text":"character scalar indicating version ez-zarr installed conda environment provided package.","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrVersion.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get the version of ez-zarr python package — getEzZarrVersion","text":"Charlotte Soneson","code":""},{"path":"https://fmicompbio.github.io/ezzarr/reference/getEzZarrVersion.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the version of ez-zarr python package — getEzZarrVersion","text":"","code":"getEzZarrVersion() #> [1] \"0.3.3\""}]
